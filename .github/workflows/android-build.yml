name: Android CI - Build Debug APK

on: push: branches: [main] workflow_dispatch:

jobs: build: runs-on: ubuntu-latest

steps:
  - name: Checkout repository
    uses: actions/checkout@v4

  - name: Set up JDK 17
    uses: actions/setup-java@v4
    with:
      distribution: temurin
      java-version: 17

  - name: Set up Android SDK
    uses: android-actions/setup-android@v2
    with:
      api-level: 33
      build-tools: 33.0.2

  - name: Grant executable to gradlew
    run: chmod +x ./gradlew

  - name: Build debug APK
    run: ./gradlew assembleDebug --no-daemon

  - name: Upload artifact (APK)
    uses: actions/upload-artifact@v4
    with:
      name: app-debug-apk
      path: android/app/build/outputs/apk/debug/app-debug.apk

